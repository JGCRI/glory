<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; GLORY 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=8d563738"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/design-tabs.js?v=36754332"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="User Guide" href="user_guide.html" />
    <link rel="prev" title="About" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            GLORY
          </a>
              <div class="version">
                1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pre-requirements">Pre-requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-glory">Install <code class="docutils literal notranslate"><span class="pre">GLORY</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-data">Example Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-glory-modules">Use <cite>GLORY</cite> Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to GLORY</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgement.html">Acknowledgement</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GLORY</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/jgcri/glory/blob/main/docs/source/getting_started.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h1>
<p>This page walks you through the steps of installing <code class="docutils literal notranslate"><span class="pre">GLORY</span></code> and running an example.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<section id="pre-requirements">
<h3>Pre-requirements<a class="headerlink" href="#pre-requirements" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Before proceeding, ensure that Python is installed (version 3.9 or above). We recommend using Anaconda to set up a virtual environment.</p></li>
<li><p>Additionally, you will need to install the linear programming solver <code class="docutils literal notranslate"><span class="pre">glpk</span></code>. The recommended method is to use <code class="docutils literal notranslate"><span class="pre">conda</span></code> to avoid unexpected issues (refer to the <a class="reference external" href="https://jckantor.github.io/ND-Pyomo-Cookbook/notebooks/01.01-Installing-Pyomo.html#glpk">Pyomo documentation</a>). Make sure to use the same Python environment for all packages.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>install<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span>glpk
</pre></div>
</div>
</section>
<section id="install-glory">
<h3>Install <code class="docutils literal notranslate"><span class="pre">GLORY</span></code><a class="headerlink" href="#install-glory" title="Link to this heading"></a></h3>
<p><strong>Option 1:</strong></p>
<p>You can install <code class="docutils literal notranslate"><span class="pre">GLORY</span></code> from GitHub using <code class="docutils literal notranslate"><span class="pre">pip</span></code> in a command prompt or terminal:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>git+https://github.com/JGCRI/glory
</pre></div>
</div>
<p>This command will automatically install the dependencies. To avoid package version conflicts, consider using a virtual environment.</p>
<p><strong>Option 2:</strong></p>
<p>Alternatively, users can clone the <code class="docutils literal notranslate"><span class="pre">GLORY</span></code> package from GitHub. Navigate to the desired directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/JGCRI/glory
</pre></div>
</div>
<p>Then, navigate into the cloned <cite>glory</cite> folder and install <code class="docutils literal notranslate"><span class="pre">GLORY</span></code> from a command prompt or terminal :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install
</pre></div>
</div>
<p>Try importing <code class="docutils literal notranslate"><span class="pre">GLORY</span></code> to confirm that installation was successful:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glory</span>

<span class="n">glory</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</section>
</section>
<section id="example-data">
<h2>Example Data<a class="headerlink" href="#example-data" title="Link to this heading"></a></h2>
<p>Example data and configuration file can be downloaded from Zenodo through this <a class="reference external" href="https://zenodo.org/records/10093575">link</a>, or by using the <code class="docutils literal notranslate"><span class="pre">GLORY</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glory</span>

<span class="c1"># The example data will be downloaded to the cloned package folder by default.</span>
<span class="n">glory</span><span class="o">.</span><span class="n">get_example_data</span><span class="p">()</span>
</pre></div>
</div>
<p>Or, if the user didn’t clone the <code class="docutils literal notranslate"><span class="pre">GLORY</span></code> package, then specify a desired download location.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glory</span>

<span class="c1"># modify example_data_directory to your own desired location</span>
<span class="n">glory</span><span class="o">.</span><span class="n">get_example_data</span><span class="p">(</span><span class="n">example_data_directory</span><span class="o">=</span><span class="s1">&#39;path/to/desired/location&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="run">
<h2>Run<a class="headerlink" href="#run" title="Link to this heading"></a></h2>
<p>With the example data downloaded, a simple configuration can be run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glory</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># modify the path if downloaded to a different directory</span>
<span class="n">config_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">glory</span><span class="o">.</span><span class="n">default_download_dir</span><span class="p">,</span> <span class="s1">&#39;example&#39;</span><span class="p">,</span> <span class="s1">&#39;example_config.yml&#39;</span><span class="p">)</span>

<span class="n">glory</span><span class="o">.</span><span class="n">run_model</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="n">config_file</span><span class="p">)</span>
</pre></div>
</div>
<p>Check your <code class="docutils literal notranslate"><span class="pre">example\outputs</span></code> folder for the results!</p>
</section>
<section id="use-glory-modules">
<h2>Use <cite>GLORY</cite> Modules<a class="headerlink" href="#use-glory-modules" title="Link to this heading"></a></h2>
<p>Instead of running the entire model, one can choose to run certain modules.</p>
<p>To generate a capacity-yield curve and a supply curve with discrete points for a single basin, users can easily instantiate the <cite>glory.SupplyCurve()</cite> object by providing the configuration object. The <cite>glory.SupplyCurve()</cite> will then undertake the process of identifying reservoir storage capacity expansion pathways and calculating the optimized water yield at each storage capacity point. The example below uses California River basin (basin ID is 217) for time step 2020.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glory</span>

<span class="c1"># indicate the path to the config file</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">glory</span><span class="o">.</span><span class="n">ConfigReader</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="n">config_file</span><span class="p">)</span>

<span class="c1"># demand_gcam and capacity_gcam is set to None because the model is not linked with GCAM in this example</span>
<span class="n">sc</span> <span class="o">=</span> <span class="n">glory</span><span class="o">.</span><span class="n">SupplyCurve</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
                       <span class="n">basin_id</span><span class="o">=</span><span class="mi">217</span><span class="p">,</span>
                       <span class="n">period</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span>
                       <span class="n">demand_gcam</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">capacity_gcam</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># Check the capacity-yield curve</span>
<span class="n">sc</span><span class="o">.</span><span class="n">capacity_yield</span>

<span class="c1"># check the supply curve</span>
<span class="n">sc</span><span class="o">.</span><span class="n">supply_curve</span>
</pre></div>
</div>
<p>One can effortlessly apply the <cite>glory.lp_model()</cite> function to execute a linear programming model that determines the optimized water yield for a given reservoir storage capacity. Below is an example with arbitrary numbers. Please note that volumetric units should be consistent across variables.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">lp</span> <span class="o">=</span> <span class="n">glory</span><span class="o">.</span><span class="n">lp_model</span><span class="p">(</span><span class="n">K</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="c1"># set storage capacity as 1 km3</span>
                    <span class="n">Smin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="c1"># minimum storage</span>
                    <span class="n">Ig</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="c1"># annual inflow in volume</span>
                    <span class="n">Eg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="c1"># annual reservoir surface evaporation in volume</span>
                    <span class="n">f</span><span class="o">=</span><span class="p">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span> <span class="n">num</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">dirichlet</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])},</span> <span class="c1"># dictionary: monthly profile for demand</span>
                    <span class="n">p</span><span class="o">=</span><span class="p">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span> <span class="n">num</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">dirichlet</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])},</span> <span class="c1"># dictionary: monthly profile for inflow</span>
                    <span class="n">z</span><span class="o">=</span><span class="p">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span> <span class="n">num</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">dirichlet</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])},</span> <span class="c1"># dictionary: monthly profile for reservoir surface evaporation</span>
                    <span class="n">m</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="c1"># percentage of water reuse</span>
                    <span class="n">solver</span><span class="o">=</span><span class="s1">&#39;glpk&#39;</span><span class="p">)</span>

<span class="c1"># view the solution</span>
<span class="n">lp</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>
</div>
<p>This will return a <a class="reference external" href="https://pyomo.readthedocs.io/en/stable/index.html">pyomo</a> object. To display the solution of the linear programming model for each variable, use <cite>lp.display()</cite>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="About" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="user_guide.html" class="btn btn-neutral float-right" title="User Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Battelle Memorial Institute.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>